#!name=QQ音乐签到
#!desc=QQ音乐每日签到，支持多账号独立控制和自动获取Cookie
#!author=SXIE-ai
#!icon=https://y.qq.com/favicon.ico
#!system=iOS,iPadOS,macOS
#!loon_version=3.2.0
#!date=2024-12-20 12:00:00

[Argument]
qqmusic_cookie1=textarea, , tag=账号1 Cookie, desc=填写账号1的QQ音乐Cookie（自动获取或手动填写）
qqmusic_enable1=switch, false, true, tag=启用账号1, desc=启用账号1的签到功能
qqmusic_cookie2=textarea, , tag=账号2 Cookie, desc=填写账号2的QQ音乐Cookie
qqmusic_enable2=switch, false, true, tag=启用账号2, desc=启用账号2的签到功能
qqmusic_cookie3=textarea, , tag=账号3 Cookie, desc=填写账号3的QQ音乐Cookie
qqmusic_enable3=switch, false, true, tag=启用账号3, desc=启用账号3的签到功能
qqmusic_cookie4=textarea, , tag=账号4 Cookie, desc=填写账号4的QQ音乐Cookie
qqmusic_enable4=switch, false, true, tag=启用账号4, desc=启用账号4的签到功能
notify_title=input, QQ音乐签到通知, tag=通知标题, desc=推送通知的标题
test_mode=switch, false, true, tag=测试模式, desc=开启后只模拟请求不实际签到
auto_cookie=switch, false, true, tag=自动获取Cookie, desc=开启后自动捕获QQ音乐Cookie

[Script]
# 每日自动签到（上午9点）
cron "0 9 * * *" script-path=https://raw.githubusercontent.com/SXIE-ai/Loon/main/plugins/QQMusic.plugin/qqmusic.js, timeout=60, tag=QQ音乐自动签到

# 手动触发签到
http-request ^https:\/\/c\.y\.qq\.com\/vip\/task\/sign\? script-path=https://raw.githubusercontent.com/SXIE-ai/Loon/main/plugins/QQMusic.plugin/qqmusic.js, timeout=60, tag=QQ音乐手动签到

# Cookie获取脚本
http-request ^https:\/\/c\.y\.qq\.com\/(?!vip\/task\/sign) script-path=https://raw.githubusercontent.com/SXIE-ai/Loon/refs/heads/main/plugins/QQMusic.plugin/qqmusic_cookie.js, requires-body=false, tag=QQ音乐Cookie获取

[MitM]
hostname = c.y.qq.com

[Rewrite]
# 可选：用于调试
^https:\/\/c\.y\.qq\.com url script-response-body https://raw.githubusercontent.com/SXIE-ai/Loon/main/plugins/QQMusic.plugin/qqmusic_cookie.js
