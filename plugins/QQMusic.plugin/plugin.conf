#!name=QQ音乐签到
#!desc=QQ音乐每日签到，支持多账号独立控制开关
#!author=插件编写助手
#!icon=https://y.qq.com/favicon.ico
#!system=iOS,iPadOS,macOS
#!loon_version=3.2.0
#!date=2024-12-20 12:00:00

[Argument]
qqmusic_cookie1=textarea, , tag=账号1 Cookie, desc=填写账号1的QQ音乐Cookie（包含uin和qqmusic_key），开启开关后生效
qqmusic_enable1=switch, false, true, tag=启用账号1, desc=启用账号1的签到功能
qqmusic_cookie2=textarea, , tag=账号2 Cookie, desc=填写账号2的QQ音乐Cookie
qqmusic_enable2=switch, false, true, tag=启用账号2, desc=启用账号2的签到功能
qqmusic_cookie3=textarea, , tag=账号3 Cookie, desc=填写账号3的QQ音乐Cookie
qqmusic_enable3=switch, false, true, tag=启用账号3, desc=启用账号3的签到功能
qqmusic_cookie4=textarea, , tag=账号4 Cookie, desc=填写账号4的QQ音乐Cookie
qqmusic_enable4=switch, false, true, tag=启用账号4, desc=启用账号4的签到功能
notify_title=input, QQ音乐签到通知, tag=通知标题, desc=推送通知的标题
test_mode=switch, false, true, tag=测试模式, desc=开启后只模拟请求不实际签到

[Script]
# 每日签到任务
cron "0 9 * * *" script-path=https://raw.githubusercontent.com/SXIE-ai/loon/main/qqmusic_checkin.js, timeout=60, tag=QQ音乐签到

# 手动触发签到
http-request ^https:\/\/c\.y\.qq\.com\/vip\/task\/sign\? script-path=https://raw.githubusercontent.com/SXIE-ai/Loon/refs/heads/main/plugins/QQMusic.plugin/qqmusic_checkin.js, timeout=60, tag=QQ音乐手动签到, requires-body=false

[MitM]
hostname = c.y.qq.com

[Rewrite]
# 用于获取Cookie（可选）
^https:\/\/c\.y\.qq\.com\/.* url script-request-header https://raw.githubusercontent.com/SXIE-ai/Loon/refs/heads/main/plugins/QQMusic.plugin/qqmusic_cookie.js
